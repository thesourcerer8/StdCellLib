default:
  image:
    name: leviathanch/libresilicon-tools:latest 
    entrypoint: [""]

stages:
  - build

gf180_lib:
  stage: build
  script:
    - |
      rm -f Tech 
      ln -s Tech.GF180MCU Tech
      . /root/env/bin/activate
      cd Catalog
      make layout
      cd ..
      mkdir -p Catalog/outputlib/errors
      cp Catalog/*.err Catalog/outputlib/errors/
      mkdir -p Catalog/outputlib/logs
      cp Catalog/*.log Catalog/outputlib/logs/
      cp -r Catalog/outputlib gf180_lib
  artifacts:
    paths:
      - gf180_lib

sky130_lib:
  stage: build
  script:
    - |
      rm -f Tech 
      ln -s Tech.SKY130 Tech
      . /root/env/bin/activate
      cd Catalog
      make layout
      cd ..
      mkdir -p Catalog/outputlib/errors
      cp Catalog/*.err Catalog/outputlib/errors/
      mkdir -p Catalog/outputlib/logs
      cp Catalog/*.log Catalog/outputlib/logs/
      cp -r Catalog/outputlib sky130_lib

  artifacts:
    paths:
      - sky130_lib

